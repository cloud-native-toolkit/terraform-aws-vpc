id: github.com/cloud-native-toolkit/terraform-aws-vpc
name: aws-vpc
type: terraform
description: Provisions the AWS VPC instance
tags:
  - infrastructure
  - networking
  - aws
versions:
  - platforms: []
    providers:
      - name: aws
        source: hashicorp/aws
    dependencies: []
    variables:
      - name: name
        type: string
        description: The name of the VPC instance
        default: ''
      - name: internal_cidr
        type: string
        description: >-
          The cidr range of the internal network for the AWS VPC. Either provide
          manually or chose from AWS IPAM poolsß
        default: 10.0.0.0/16
      - name: external_cidr
        type: string
        description: The cidr range of the external network for the AWS VPC.
        default: 0.0.0.0/0
      - name: provision
        type: bool
        description: >-
          Flag indicating that the instance should be provisioned. If false then
          an existing instance will be looked up
        default: true
      - name: instance_tenancy
        type: string
        description: 'Instance is shared / dedicated, etc. #[default, dedicated, host]'
        default: default
      - name: name_prefix
        type: string
        description: >-
          Prefix to be added to the names of resources which are being
          provisioned
        default: swe
        scope: global
      - name: enable_dns_support
        type: string
        description: default is true. [true, false]]
        default: 'true'
      - name: enable_dns_hostnames
        type: string
        description: Default is false. [true, false]]. Set to true for ROSA cluster
        default: 'false'
      - name: resource_group_name
        type: string
        description: >-
          The name of the resource group where the VPC is deployed. On AWS this
          value becomes a tag.
        default: default
        scope: global
    version: v1.5.4
    outputs:
      - name: vpc
      - name: vpc_name
      - name: vpc_id
        description: The id for the vpc network
      - name: vpc_arn
        description: The arn of the vpc
      - name: default_network_acl_id
        description: The id for the default network acl
      - name: default_security_group_id
        description: The id of the default security group.
      - name: default_security_group_arn
        description: The arn of the default security group.
  - platforms: []
    providers:
      - name: aws
        source: hashicorp/aws
    dependencies:
      - id: aws-vpc-subnets
        refs:
          - source: github.com/cloud-native-toolkit/terraform-aws-vpc-subnets
            version: '>= 1.0.0'
      - id: aws-client-vpn
        refs:
          - source: github.com/cloud-native-toolkit/terraform-aws-vpn-server
            version: '>= 1.0.0'
    variables:
      - name: name
        type: string
        description: The name of the VPC instance
        default: ''
      - name: internal_cidr
        type: string
        description: >-
          The cidr range of the internal network for the AWS VPC. Either provide
          manually or chose from AWS IPAM poolsß
        default: 10.0.0.0/16
      - name: external_cidr
        type: string
        description: The cidr range of the external network for the AWS VPC.
        default: 0.0.0.0/0
      - name: provision
        type: bool
        description: >-
          Flag indicating that the instance should be provisioned. If false then
          an existing instance will be looked up
        default: true
      - name: instance_tenancy
        type: string
        description: 'Instance is shared / dedicated, etc. #[default, dedicated, host]'
        default: default
      - name: name_prefix
        type: string
        description: >-
          Prefix to be added to the names of resources which are being
          provisioned
        default: swe
        scope: global
      - name: enable_dns_support
        type: string
        description: default is true. [true, false]]
        default: 'true'
      - name: enable_dns_hostnames
        type: string
        description: Default is false. [true, false]]. Set to true for ROSA cluster
        default: 'false'
      - name: resource_group_name
        type: string
        description: >-
          The name of the resource group where the VPC is deployed. On AWS this
          value becomes a tag.
        default: default
        scope: global
      - name: number_subnets_vpn
        description: list if subnets to attch with vpn
        type: number
        default: '0'
      - name: vpn_endpoint_id
        type: string
        description: The vpn client endpoint.
        default: ''
        moduleRef:
          id: aws-client-vpn
          output: vpn_endpoint_id
      - name: vpn_subnets_id
        type: list(string)
        description: id of associated subnets with vpn client service
        default: []
        moduleRef:
          id: aws-vpc-subnets
          output: subnet_ids
    version: v1.5.3
    outputs:
      - name: vpc
      - name: vpc_name
      - name: vpc_id
        description: The id for the vpc network
      - name: vpc_arn
        description: The arn of the vpc
      - name: default_network_acl_id
        description: The id for the default network acl
      - name: default_security_group_id
        description: The id of the default security group.
      - name: default_security_group_arn
        description: The arn of the default security group.
cloudProvider: aws
